<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>
    《C++ Primer （第五版）》学习笔记 -- 之一 |
    
    六加的博客</title>
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<script src="/js/pace.min.js"></script>

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
<main class="content">
  <section class="outer">
  <article id="post-C++-Primer-第五版学习笔记（一）" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
      
  
    <h1 class="article-title" itemprop="name">
      《C++ Primer （第五版）》学习笔记 -- 之一
    </h1>
  
  




    </header>
    

    
    <div class="article-meta">
      <a href="/2020/02/18/C++-Primer-%E7%AC%AC%E4%BA%94%E7%89%88%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/" class="article-date">
  <time datetime="2020-02-17T16:00:00.000Z" itemprop="datePublished">2020-02-18</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a>
  </div>

    </div>
    

    
    
<div class="tocbot"></div>

    

    <div class="article-entry" itemprop="articleBody">
      


      
  <div class="article-gallery">
    <div class="article-gallery-photos">
      
        
          <img src="/images/C++Primer.jpg" itemprop="image">
        
      
    </div>
  </div>


      
      <h1>C++ Primer 第五版学习笔记（一）</h1>
<hr>
<p>[TOC]</p>
<hr>
<h2 id="第一章-开始"><a class="header-anchor" href="#第一章-开始">¶</a>第一章 开始</h2>
<p>在本章中，我们将编写一个程序来解决简单的书店问题。<br>
我们的书店保存所有销售记录的档案，每条记录保存了某本书的一次销售的信息（一册或多册）。每条记录包含三个数据项：</p>
<ul>
<li>书的 ISBN 号（唯一标识）。如： 0-201-70353-X</li>
<li>售出册数。如：4</li>
<li>单价。如： 24.99</li>
</ul>
<h3 id="1-1-缩写一个简单的-C-程序"><a class="header-anchor" href="#1-1-缩写一个简单的-C-程序">¶</a>1.1 缩写一个简单的 C++ 程序</h3>
<p>每个 C++ 程序都包含一个或多个函数，其中一个必须命名为 <code>main</code>。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在大多数系统中，<code>main</code> 的返回值被用来指示状态。返回 <code>0</code> 表明成功，<strong>非 <code>0</code> 的返回值的含义由系统定义</strong>，通常用来指出错误类型。</p>
<h4 id="1-1-1-编译、运行程序"><a class="header-anchor" href="#1-1-1-编译、运行程序">¶</a>1.1.1 编译、运行程序</h4>
<h5 id="程序源文件命名约定"><a class="header-anchor" href="#程序源文件命名约定">¶</a>程序源文件命名约定</h5>
<p>略，见 P3。</p>
<h5 id="从命令行运行编译器"><a class="header-anchor" href="#从命令行运行编译器">¶</a>从命令行运行编译器</h5>
<ul>
<li>
<p>GNU 编译器的命令是：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$g</span>++ -o prog1 prog1.cc</span><br></pre></td></tr></table></figure>
<blockquote>
<p>根据使用的 GNU 编译器版本，你可能需要指定 <code>-std=c++0x</code> 参数来打开对 C++11 的支持。</p>
</blockquote>
</li>
<li>
<p>Visual Studio 2010 编译器命令为 cl：</p>
  <figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">C:\<span class="title">Users</span>\<span class="title">me</span>\<span class="title">Programs</span>&gt; <span class="title">cl</span> /<span class="title">EHsc</span> <span class="title">prog1.cpp</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>/EHsc</code> 选项用来打开标准异常处理。</p>
</blockquote>
</li>
<li>
<p>编译器通常包含一些选项，能对有问题的程序结构发出警告。我们习惯在 GNU 编译器中使用 <code>-Wall</code> 选项，在微软编译器中则使用 <code>/W</code> 打开警告。</p>
</li>
</ul>
<h4 id="1-1-节习题"><a class="header-anchor" href="#1-1-节习题">¶</a>1.1 节习题</h4>
<ul>
<li>
<p>练习 1.1：查阅你使用的编译器的文档，确定它所使用的文件命名约定。编译并运行第 2 页的 <code>main</code> 程序。</p>
<p>解：</p>
<p><img src="images/C++Primer/practice1.1.PNG" alt="习题1.1.1"></p>
</li>
<li>
<p>练习 1.2：改写程序，让它返回 <code>-1</code>。返回 <code>-1</code> 通常被当作程序错误的标识。重新编译并运行你的程序，观察你的系统如何处理 main 返回的错误标识。</p>
<p>解：</p>
<p><img src="images/C++Primer/practice1.1.PNG" alt="习题1.1.1"></p>
</li>
</ul>
<h3 id="1-2-初识输入输出"><a class="header-anchor" href="#1-2-初识输入输出">¶</a>1.2 初识输入输出</h3>
<p><code>iostream</code> 库包含两个基础类型 <code>istream</code> 和 <code>ostream</code>，分别表示 <strong>输入流</strong> 和 <strong>输出流</strong> 。一个 <strong>流</strong> 就是一个字符序列，是从 IO 设备读出或输入 IO 设备的。</p>
<blockquote>
<p>术语“流”(stream)想要表达的是，随着时间的失衡，字符是顺序生成或消耗的。</p>
</blockquote>
<blockquote>
<p><strong>注意</strong>：<code>iostream</code> 是 <strong>库</strong>，<code>istream</code> 和 <code>ostream</code> 是 <code>iostream</code> 库中的对象。若 <strong>仅</strong>  <code>#include &lt;istream&gt;</code> 或 <code>#include &lt;ostream&gt;</code> 将不会报错，但对于命名空间 <code>std</code> 的引用将会出现类似 <code>“cout”: 不是“std”的成员</code> 的错误。</p>
</blockquote>
<h4 id="标准输入输出对象"><a class="header-anchor" href="#标准输入输出对象">¶</a>标准输入输出对象</h4>
<p>标准库定义了 4 个 IO 对象：</p>
<ol>
<li><code>cin</code>： 为了处理输入，我们使用一个名为 <code>cin</code> (发音为 see-in)的 <code>istream</code> 类型的对象。这个对象也被称为 <strong>标准输入</strong> (standard input)。</li>
<li><code>cout</code>：对于输出，我们使用一个名为 <code>cout</code> (发音为 see-out)的 <code>ostream</code> 类型对象。此对象也被称为 <strong>标准输出</strong> (standard output)。</li>
<li><code>cerr</code>：我们通常用 <code>ostream</code> 对象 <code>cerr</code> (发音为 see-err) 来输出警告和错误消息，因此它也被称为 <strong>标准错误</strong> (standard error)。</li>
<li><code>clog</code>：<code>ostream</code> 对象 <code>clog</code> (发音为 see-log) 用来输出程序运行时一般性信息。</li>
</ol>
<p>系统通常将程序所运行的窗口与这些对象关联起来。因此当我们读取 <code>cin</code>，数据将从程序正在运行的窗口读入，当我们向 <code>cout</code>、<code>cerr</code> 和 <code>clog</code> 写入数据时，将会写到同一个窗口。</p>
<h4 id="一个使用-IO-库的程序"><a class="header-anchor" href="#一个使用-IO-库的程序">¶</a>一个使用 IO 库的程序</h4>
<p>在书店程序中，我们需要将多条记录合并成单一的汇总记录：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::out &lt;&lt; <span class="string">"Enter two numbers: "</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">int</span> vl = <span class="number">0</span>, v2 = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; v1 &gt;&gt; v2;</span><br><span class="line">    <span class="built_in">std</span>::out &lt;&lt; <span class="string">"The sum of "</span> &lt;&lt; v1 &lt;&lt; <span class="string">" and "</span> &lt;&lt; v2 &lt;&lt; <span class="string">" is "</span> &lt;&lt; v1 + v2 &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>#include</code> 指令和头文件的名字必须写在同一行中。</li>
<li>通常情况下，<code>#include</code> 指令必须出现在所有函数之外。</li>
<li>我们一般将一个程序的所有 <code>#include</code> 指令都放在源文件的开始位置。</li>
</ul>
<h4 id="向流写入数据"><a class="header-anchor" href="#向流写入数据">¶</a>向流写入数据</h4>
<ul>
<li><code>main</code> 的函数体第一条语句执行了一个表达式 (expression)。在 C++ 中，一个表达式产生一个计算结果，它由一个或多个运算对象和(通常是)一个运算符组成。</li>
<li>第一个输出运算符给用户打印一条消息。这个消息是一个 <strong>字符串字面值常量</strong> (string literal)，是用一对双引号包围的字符序列。</li>
<li>第二个运算符打印 <code>endl</code>，这是一个被称为 <strong>操纵符</strong> (manipulator) 的特殊值。写入 <code>endl</code> 的效果是结束当前行，<strong>并将与设备关联的 <em>缓冲区</em> (buffer) 中的内容刷到设备中</strong>。</li>
</ul>
<blockquote>
<p><strong>注意</strong>：程序员常常在调度时添加打印语句。这类语句应该保证“一直”刷新流。否则，如果程序崩溃，输出可能还留在缓冲区中，从而导致关于程序崩溃位置的错误推断。</p>
</blockquote>
<h4 id="使用标准库中的名字"><a class="header-anchor" href="#使用标准库中的名字">¶</a>使用标准库中的名字</h4>
<p>前缀 <code>std::</code> 指出名字 <code>cout</code> 和 <code>endl</code> 是定义在名为 <code>std</code> 的 <strong>命名空间</strong> (namespace)中的。</p>
<p>命名空间可以：</p>
<ul>
<li>帮助我们避免不经意的名字定义冲突。</li>
<li>使用库中相同名字导致的冲突。</li>
</ul>
<blockquote>
<p>标准库定义的所有名字都在命名空间 <code>std</code> 中。</p>
</blockquote>
<h4 id="从流读取数据"><a class="header-anchor" href="#从流读取数据">¶</a>从流读取数据</h4>
<p>略，见 P7。</p>
<h4 id="完成程序"><a class="header-anchor" href="#完成程序">¶</a>完成程序</h4>
<p>略，见 P7。</p>
<h4 id="1-2-节练习"><a class="header-anchor" href="#1-2-节练习">¶</a>1.2 节练习</h4>
<ul>
<li>
<p>练习 1.3：编写程序，在标准输出上打印 Hello, World</p>
<p>解：</p>
  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Hellow, World"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="images/C++Primer/practice1.3.PNG" alt="习题1.1.1"></p>
</li>
<li>
<p>练习 1.4：我们的程序使用加法运算符 <code>+</code> 来将两个数相加。编写程序使用乘法运算符 <code>*</code>，来打印两个数的积。</p>
<p>解：</p>
  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> v1 = <span class="number">1</span>, v2 = <span class="number">2</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"v1 + v2 = "</span> &lt;&lt; v1 + v2 &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"v1 * v2 = "</span> &lt;&lt; v1 * v2 &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="images/C++Primer/practice1.4.PNG" alt="习题1.1.1"></p>
</li>
<li>
<p>练习 1.5：我们将所有输出操作放在一条很长的语句中。重写程序，将每个运算对象的打印操作放在一条独立的语句中。</p>
<p>解：见习题 1.4。</p>
</li>
<li>
<p>练习 1.6：解释下面程序片段是否合法。</p>
  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"The sum of "</span> &lt;&lt; v1;</span><br><span class="line">          &lt;&lt; <span class="string">" and "</span> &lt;&lt; v2;</span><br><span class="line">          &lt;&lt; <span class="string">" is "</span> &lt;&lt; v1 + v2 &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure>
<p>解：不合法。因为：</p>
<ul>
<li>根据 P3：<em>大多数 C++ 语句表示结束。</em> 所以片段第一行语句已结束，第二行和第三行都已是新语句。</li>
<li>又根据 P6：<em><code>&lt;&lt;</code> 运算符接受两个运算对象：左侧是运算对象必须是一个 <code>ostream</code> 对象，右侧对象是要打印的值。</em> 所以第二、三行缺少 <code>ostream</code> 对象。</li>
</ul>
<p>修正：</p>
  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"The sum of "</span> &lt;&lt; v1</span><br><span class="line">          &lt;&lt; <span class="string">" and "</span> &lt;&lt; v2</span><br><span class="line">          &lt;&lt; <span class="string">" is "</span> &lt;&lt; v1 + v2 &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure>
<p>或</p>
  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"The sum of "</span> &lt;&lt; v1;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">" and "</span> &lt;&lt; v2;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">" is "</span> &lt;&lt; v1 + v2 &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="1-3-注释简介"><a class="header-anchor" href="#1-3-注释简介">¶</a>1.3 注释简介</h3>
<h4 id="C-中注释的种类"><a class="header-anchor" href="#C-中注释的种类">¶</a>C++ 中注释的种类</h4>
<p>略，见 P8。</p>
<h4 id="注释界定符不能嵌套"><a class="header-anchor" href="#注释界定符不能嵌套">¶</a>注释界定符不能嵌套</h4>
<p>界定符对形式的注释是以 <code>/*</code> 开始，以 <code>*/</code> 结束的。因此，一个注释不能嵌套在另一个注释之内。例如，在你的系统中编译如下程序，就会产生错误：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 注释对 /* */</span> 不能嵌套。</span><br><span class="line"> * “不能嵌套” 几个字会被认为是源码，</span><br><span class="line"> * 像剩余程序一样处理</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line"> <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>我们通常需要在调度期间注释掉一些代码。由于这些代码可能包含界定符形式的注释，因此可能导致注释嵌套错误，因此最好的方式是用 <strong>单行注释</strong> 方式注释掉代码段的每一行：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// /*</span></span><br><span class="line"><span class="comment">//  * 单行注释中的任何内容都会被忽略</span></span><br><span class="line"><span class="comment">//  * 包括嵌套的注释对也一样会被忽略</span></span><br><span class="line"><span class="comment">//  */</span></span><br></pre></td></tr></table></figure>
<h4 id="1-3-节练习"><a class="header-anchor" href="#1-3-节练习">¶</a>1.3 节练习</h4>
<ul>
<li>
<p>练习 1.7：编译一个包含不正确的嵌套注释的程序，观察编译器返回的错误信息。</p>
<p>解：</p>
  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 注释对 /* */</span> 不能嵌套。</span><br><span class="line"> * “不能嵌套” 几个字会被认为是源码，</span><br><span class="line"> * 像剩余程序一样处理</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line"> <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p><img src="images/C++Primer/practice1.7.PNG" alt="习题1.1.1"></p>
</li>
<li>
<p>练习 1.8：指出下列哪些输出语句是合法的（如果有的话）：</p>
  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"/*"</span>;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"*/"</span>;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="comment">/* "*/</span><span class="string">" */;</span></span><br><span class="line"><span class="string">std::cout &lt;&lt; /* "</span>*/<span class="string">" /* "</span><span class="comment">/*" */</span>;</span><br></pre></td></tr></table></figure>
<p>预测编译这些语句会产生什么样的结果，实际编译这些语句来验证你的答案（编写一个小程序，每次将上述一条语句作为其主体），改正每个编译错误。</p>
<p>解：</p>
<p>预测：语句一、二和语句四编译通过，语句三编译错误。</p>
<p>验证：</p>
<ol>
<li>
<p>语句一：</p>
 <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"/*"</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出：</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;*</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>语句二：</p>
 <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"*/"</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出：</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*&#x2F;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>语句三：</p>
 <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="comment">/* "*/</span><span class="string">" */;</span></span><br><span class="line"><span class="string">    return 0;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>
<p>输出：</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">用于 x86 的 Microsoft (R) C&#x2F;C++ 优化编译器 19.24.28316 版</span><br><span class="line">版权所有(C) Microsoft Corporation。保留所有权利。</span><br><span class="line"></span><br><span class="line">prog1.cc</span><br><span class="line">.\prog1.cc(4): error C2001: 常量中有换行符</span><br><span class="line">.\prog1.cc(5): error C2143: 语法错误: 缺少“;”(在“return”的前面)</span><br></pre></td></tr></table></figure>
<p>改正：</p>
 <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"*/"</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出：</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*&#x2F;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>语句四：</p>
 <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="comment">/* "*/</span><span class="string">" /* "</span><span class="comment">/*" */</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出：</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;*</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ul>
<h3 id="1-4-控制流"><a class="header-anchor" href="#1-4-控制流">¶</a>1.4 控制流</h3>
<h4 id="1-4-1-while-语句"><a class="header-anchor" href="#1-4-1-while-语句">¶</a>1.4.1 <code>while</code> 语句</h4>
<p>略，见 P10~P11。</p>
<h5 id="1-4-1-节练习"><a class="header-anchor" href="#1-4-1-节练习">¶</a>1.4.1 节练习</h5>
<ul>
<li>
<p>练习 1.9：编写程序，使用 <code>while</code> 循环将 <code>50</code> 到 <code>100</code> 的整数相加。</p>
<p>解：</p>
  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> v = <span class="number">49</span>, sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(v &lt; <span class="number">100</span>) &#123;</span><br><span class="line">        sum += (++v);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"The sum of 50 ~ 100 is "</span> &lt;&lt; sum &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The sum of 50 ~ 100 is 3825</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>练习 1.10：除了 <code>++</code> 运算符将运算对象增加 <code>1</code> 之外，还有一个递减运算符 (<code>--</code>) 实现将值减少 <code>1</code>。编写程序，使用递减运算符在循环中顺序打印 <code>10</code> 到 <code>0</code> 之间的整数。</p>
<p>解：</p>
  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> v = <span class="number">11</span>;</span><br><span class="line">    <span class="keyword">while</span>(v &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; --v &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">10</span><br><span class="line">9</span><br><span class="line">8</span><br><span class="line">7</span><br><span class="line">6</span><br><span class="line">5</span><br><span class="line">4</span><br><span class="line">3</span><br><span class="line">2</span><br><span class="line">1</span><br><span class="line">0</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>练习 1.11：编写程序，提示用户输入两个整数，打印出这两个整数所指定的范围内的所有整数。</p>
<p>解：</p>
  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> v_start = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> v_end = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Please enter start number: "</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; v_start;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Please enter end number: "</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; v_end;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span> &lt;&lt; <span class="string">"The integers between "</span></span><br><span class="line">              &lt;&lt; v_start &lt;&lt; <span class="string">" and "</span> &lt;&lt; v_end &lt;&lt; <span class="string">" are: "</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span>(v_end &gt;= v_start) &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; v_start &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">        ++v_start;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Please enter start number: 1</span><br><span class="line"></span><br><span class="line">Please enter end number: 5</span><br><span class="line"></span><br><span class="line">The integers between 1 and 5 are: 1 2 3 4 5</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="1-4-2-for-语句"><a class="header-anchor" href="#1-4-2-for-语句">¶</a>1.4.2 <code>for</code> 语句</h4>
<p>用 <code>for</code> 语句重写从 <code>1</code> 加到 <code>10</code> 的程序：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// 从 1 加到 10</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> val = <span class="number">1</span>; val &lt;= <span class="number">10</span>; ++val)</span><br><span class="line">        sum += val; <span class="comment">// 等价于 sum = sum + val</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Sum of 1 to 10 inclusive is "</span></span><br><span class="line">              &lt;&lt; sum &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>简要重述一下 <code>for</code> 循环的总体执行流程：</p>
<ol>
<li>创建变量 <code>val</code>，将其初始化为 <code>1</code>。</li>
<li>检测 <code>val</code> 是否小于等于 <code>10</code>。若检测成功，执行 <code>for</code> 循环体。若失败，退出循环，继续执行<code>for</code> 循环体之后的第一条语句。</li>
<li>将 <code>val</code> 的值增加 <code>1</code>。</li>
<li>重复第 2 步中的条件检测，只要条件为真就继续执行剩余步骤。</li>
</ol>
<h5 id="1-4-2-节练习"><a class="header-anchor" href="#1-4-2-节练习">¶</a>1.4.2 节练习</h5>
<ul>
<li>
<p>练习 1.12：下面的 <code>for</code> 循环完成了什么功能？<code>sum</code> 的终值是多少？</p>
  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">-100</span>; i &lt;= <span class="number">100</span>; ++i)</span><br><span class="line">    sum += <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<p>解：</p>
<p>完成了从 <code>0</code> 到 <code>201</code> 之间的整数遍历。<code>sum</code> 的终值为 <code>201</code>。</p>
</li>
<li>
<p>练习 1.13：使用 <code>for</code> 循环重做 1.4.1 节中的所有练习(第 11 页)。</p>
<p>解：</p>
<ol>
<li></li>
</ol>
<pre><code>  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">50</span>; i &lt; <span class="number">101</span>; ++i) &#123;</span><br><span class="line">        sum += i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"The sum of 50 ~ 100 is "</span> &lt;&lt; sum &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</code></pre>
<ol start="2">
<li></li>
</ol>
<pre><code>  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> v = <span class="number">10</span>; v &gt;= <span class="number">0</span>; --v)</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; v &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</code></pre>
<ol start="3">
<li></li>
</ol>
<pre><code>  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> v_start = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> v_end = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Please enter start number: "</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; v_start;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Please enter end number: "</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; v_end;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span> &lt;&lt; <span class="string">"The integers between "</span></span><br><span class="line">              &lt;&lt; v_start &lt;&lt; <span class="string">" and "</span> &lt;&lt; v_end &lt;&lt; <span class="string">" are: "</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = v_start; i &lt;= v_end; i++)</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">" "</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li>
<p>练习 1.14：对比 <code>for</code> 循环 <code>while</code> 循环，两种形式的优缺点各是什么？</p>
<p>解：</p>
<p>在 <code>for</code> 循环中，循环控制变量的初始化和修改都放在语句头部分，形式较简洁，且特别适用于循环次数已知的情况。在 <code>while</code> 循环中，循环控制变量的初始化一般放在 <code>while</code> 语句之前，循环控制变量的修改一般放在循环体中，形式上不如 <code>for</code> 语句简洁，但它比较适用于循环次数不易预知的情况（用某一条件控制循环）。两种形式各有优点，但它们在功能上是等价的，可以相互转换。</p>
</li>
<li>
<p>练习 1.15：编写程序，包含第 14 页“再探编译”中讨论的常见错误。熟悉编译器生成的错误信息。</p>
<p>解：</p>
  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">      .\prog1.cc(4): error C2143: 语法错误: 缺少“;”(在“:”的前面)</span></span><br><span class="line"><span class="comment">      .\prog1.cc(4): error C2059: 语法错误:“:”</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Read each file."</span> &lt;&lt; <span class="built_in">endl</span>:</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     .\prog1.cc(4): error C2065: “Update”: 未声明的标识符</span></span><br><span class="line"><span class="comment">     .\prog1.cc(4): error C2146: 语法错误: 缺少“;”(在标识符“master”的前面)</span></span><br><span class="line"><span class="comment">     .\prog1.cc(4): error C2065: “master”: 未声明的标识符</span></span><br><span class="line"><span class="comment">     .\prog1.cc(4): error C2059: 语法错误:“&lt;&lt;”</span></span><br><span class="line"><span class="comment">     .\prog1.cc(4): error C2228: “.endl”的左边必须有类/结构/联合</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; Update master. &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     .\prog1.cc(4): error C2143: 语法错误: 缺少“;”(在“std::endl”的前面)</span></span><br><span class="line"><span class="comment">     .\prog1.cc(4): error C2143: 语法错误: 缺少“;”(在“:”的前面)</span></span><br><span class="line"><span class="comment">     .\prog1.cc(4): warning C4551: 缺少参数列表的函数调用</span></span><br><span class="line"><span class="comment">     .\prog1.cc(4): error C2059: 语法错误:“:”</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Write new master."</span> <span class="built_in">std</span>::<span class="built_in">endl</span>:</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     .\prog1.cc(4): error C2440: “初始化”: 无法从“const char [6]”转换为“int”</span></span><br><span class="line"><span class="comment">     .\prog1.cc(4): note: 没有使该转换得以执行的上下文</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">int</span> v0 = <span class="string">"hello"</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     .\prog1.cc(5): error C2065: “v”: 未声明的标识符</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">int</span> v1 = <span class="number">0</span>, v2 = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; v &gt;&gt; v2;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     .\prog1.cc(5): error C2065: “cout”: 未声明的标识符</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; v1 + v2 &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="1-4-3-读取数量不定的输入数据"><a class="header-anchor" href="#1-4-3-读取数量不定的输入数据">¶</a>1.4.3 读取数量不定的输入数据</h4>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>, value = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; value)</span><br><span class="line">        sum += value; <span class="comment">// 等价于 sum = sum + value</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Sum is: "</span> &lt;&lt; sum &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输入：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3 4 5 6</span><br></pre></td></tr></table></figure>
<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Sum is: 18</span><br></pre></td></tr></table></figure>
<p><strong>当我们使用一个 <code>istream</code> 对象作为条件时，其效果是检测流的状态。如果是流是有效的，即流未遇到错误，那么检测成功。当遇到 <em>文件结束符</em>(end-of-file)，或遇到一个无效输入时 (例如读入的值不是一个整数)，<code>istream</code> 对象的状态会变为无效。处于无效状态的 <code>istream</code> 对象会使条件变为假。</strong></p>
<h5 id="1-4-3-节练习"><a class="header-anchor" href="#1-4-3-节练习">¶</a>1.4.3 节练习</h5>
<ul>
<li>
<p>练习 1.16：编写程序，从 <code>cin</code> 读取一组数，输出其和。</p>
<p>解：</p>
  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>, result = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; sum)</span><br><span class="line">        result += sum;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; result &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输入：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">^C</span><br></pre></td></tr></table></figure>
<p>输出：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">10</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="1-4-4-if-语句"><a class="header-anchor" href="#1-4-4-if-语句">¶</a>1.4.4 <code>if</code> 语句</h4>
<p>略，见 P15~P16。</p>
<h5 id="1-4-4-节练习"><a class="header-anchor" href="#1-4-4-节练习">¶</a>1.4.4 节练习</h5>
<ul>
<li>
<p>练习 1.17：如果输入的所有值都是相等的，本节的程序会输出什么？如果没有重复值，输出又会是怎样的？</p>
<p>解：</p>
<p>输入：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">42 42 42 42 42 42 42 42 42 42 42</span><br></pre></td></tr></table></figure>
<p>输出：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">42 occurs 11 times</span><br></pre></td></tr></table></figure>
<p>输入：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">42 43 44 45 46 47 48 49 50 51 52</span><br></pre></td></tr></table></figure>
<p>输出：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">42 occurs 1 times</span><br><span class="line">43 occurs 1 times</span><br><span class="line">44 occurs 1 times</span><br><span class="line">45 occurs 1 times</span><br><span class="line">46 occurs 1 times</span><br><span class="line">47 occurs 1 times</span><br><span class="line">48 occurs 1 times</span><br><span class="line">49 occurs 1 times</span><br><span class="line">50 occurs 1 times</span><br><span class="line">51 occurs 1 times</span><br><span class="line">52 occurs 1 times</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>练习 1.18：编译并运行本节的程序，给它输入全都相等的值。再次运行程序，输入没有重复的值。</p>
<p>解：</p>
<p>见练习 1.17。</p>
</li>
<li>
<p>练习 1.19：修改你为 1.4.1 节练习 1.10 (第11页) 所编写的程序 (打印一个范围内的数)，使其能处理用户输入的第一个数比第二个数小的情况。</p>
<p>解：</p>
  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> first = <span class="number">0</span>, second = <span class="number">0</span>, tmp = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Please enter two numbers:"</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; first &gt;&gt; second;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(first &lt; second) &#123;</span><br><span class="line">        tmp = first;</span><br><span class="line">        first = second;</span><br><span class="line">        second = tmp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; first &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">while</span>(first &gt; second) &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; --v &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输入：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Please enter two numbers:10 22</span><br></pre></td></tr></table></figure>
<p>输出：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">22</span><br><span class="line">21</span><br><span class="line">20</span><br><span class="line">19</span><br><span class="line">18</span><br><span class="line">17</span><br><span class="line">16</span><br><span class="line">15</span><br><span class="line">14</span><br><span class="line">13</span><br><span class="line">12</span><br><span class="line">11</span><br><span class="line">10</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="1-5-类简介"><a class="header-anchor" href="#1-5-类简介">¶</a>1.5 类简介</h3>
<p>C++ 最初的一个设计焦点就是能定义使用上像内置类型一样自然的 <strong>类类型</strong> (class type)。</p>
<p>对于书店程序来说，我们假定类名为 <code>Sales_item</code>，头文件 <em>Sales_item.h</em> 中已经定义了这个类。</p>
<p><strong>为了使用标准库设施，我们必须包含相关的头文件。习惯上，头文件根据其中定义的类的名字来命名。</strong></p>
<p><strong>我们通常使用 <em>.h</em> 作为头文件的后缀，但也有一些程序员习惯 <em>.H</em> 、 <em>.hpp</em> 或 <em>.hxx</em> 。标准库头文件通常不带后缀。</strong></p>
<h4 id="1-5-1-Sales-item-类"><a class="header-anchor" href="#1-5-1-Sales-item-类">¶</a>1.5.1 <code>Sales_item</code> 类</h4>
<p>定义类类型的变量：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Sales_item item;</span><br></pre></td></tr></table></figure>
<p>除了可以定义 <code>Sales_item</code> 类型的变量之外，我们还可以：</p>
<ul>
<li>调用一个名为 <code>isbn</code> 的函数从一个 <code>Sales_item</code> 对象中提取 ISBN 书号。</li>
<li>用输入运算符 (<code>&gt;&gt;</code>) 和输出运算符 (<code>&lt;&lt;</code>) 读、写 <code>Sales_item</code> 类型对象。</li>
<li>用赋值运算符 (<code>=</code>) 将一个 <code>Sales_item</code> 对旬的值赋予另一个 <code>Sales_item</code> 对象。</li>
<li>用加法运算符 (<code>+</code>) 将两个 <code>Sales_item</code> 对象相加。两个对象必须表示同一本书 (相同的 ISBN)。加法结果是一个新的 <code>Sales_item</code> 对象，基 ISBN 与两个运算对象相同，而其总销售额和售出册数则是两个运算对象的对应值之和。</li>
<li>使用复合赋值运算符 (<code>+=</code>) 将一个 <code>Sales_item</code> 对象加到另一个对象上。</li>
</ul>
<h5 id="读写-Sales-item"><a class="header-anchor" href="#读写-Sales-item">¶</a>读写 <code>Sales_item</code></h5>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Sales_item.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Sales_item book;</span><br><span class="line">    <span class="comment">// 读入 ISBN 号、售出的册数以及销售价格</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; book;</span><br><span class="line">    <span class="comment">// 写入 ISBN、售出的册数、总销售额和平均价格</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; book &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输入：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0-201-70353-X 4 24.99</span><br></pre></td></tr></table></figure>
<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0-201-70353-X 4 99.96 24.99</span><br></pre></td></tr></table></figure>
<blockquote>
<p>此程序以两个 <code>#include</code> 指令开始，其中一个使用了新的形式。包含来自标准库的头文件，也应该用尖括号 (<code>&lt;</code> <code>&gt;</code>) 包围头文件名。对于不属于标准库的头文件，则用双引号 (<code>&quot;</code> <code>&quot;</code>) 包围。</p>
</blockquote>
<h5 id="Sales-item-对象的加法"><a class="header-anchor" href="#Sales-item-对象的加法">¶</a><code>Sales_item</code> 对象的加法</h5>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Sales_item.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Sales_item item1, item2;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; item1 &gt;&gt; item2;               <span class="comment">// 读取一对交易记录</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; item1 + item2 &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;  <span class="comment">// 打印它们的和</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输入：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">0-201-78345-X 3 20.00</span><br><span class="line">0-201-78345-X 2 25.00</span><br></pre></td></tr></table></figure>
<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0-201-78345-X 5 110 22</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>使用文件重定向</strong></p>
<hr>
<p>当你测试程序时，反复从键盘调入这些销售记录作为程序输入，是非常乏味的（<strong>笔记</strong>：用文件作为输入可以避免终端输入的数据和输出的数据混杂在一起引起混淆。）。这种机制允许我们将标准输入和标准输出与命名文件关联起来：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ addItems &lt;infile &gt;outfile</span><br></pre></td></tr></table></figure>
<p>假定 <code>$</code> 是操作系统提示符，我们的加法程序已经编译命名为  <em>addItems.exe</em> 的可执行文件 (在 Unix 中是 <em>addItems</em> )，则上述命令会从一个名为 <em>infile</em> 的文件读取销售记录，并将输出结果写入到一个名为 <em>output</em> 的文件中，两个文件都位于当前目录中。</p>
</blockquote>
<h5 id="1-5-1-节练习"><a class="header-anchor" href="#1-5-1-节练习">¶</a>1.5.1 节练习</h5>
<ul>
<li>
<p>练习 1.20：在网站 <a href="http://www.informit.com/title/0321714113" target="_blank" rel="noopener">http://www.informit.com/title/0321714113</a> 上，第 1 章的代码目录中包含了头文件 <em>Sales_item.h</em> 。将它拷贝到你自己的工作目录中。用它编写一个程序，读取一组书籍销售记录，将每条记录打印到标准输出上。</p>
<p>解：</p>
  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Sales_item.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Sales_item book;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; book) &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; book &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输入：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0-201-78345-X 3 20.00 0-201-78345-X 2 20.00 0-201-78345-X 5 20.00</span><br></pre></td></tr></table></figure>
<p>输出：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0-201-78345-X 3 60 20</span><br><span class="line">0-201-78345-X 2 40 20</span><br><span class="line">0-201-78345-X 5 100 20</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>练习 1.21：编写程序，读取两个 ISBN 相同的 <code>Sales_item</code> 对象，输出它们的和。</p>
<p>解：</p>
  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Sales_item.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Sales_item item1, item2;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Please enter two Sales_item:"</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; item1 &gt;&gt; item2;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; item1 + item2 &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输入：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Please enter two Sales_item:0-201-78345-X 3 20.00 0-201-78345-X 2 25.00</span><br></pre></td></tr></table></figure>
<p>输出：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0-201-78345-X 5 110 22</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>练习 1.22：编写程序，读取多个具有相同 ISBN 的销售记录，输出所有记录的和。</p>
<p>解：</p>
  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Sales_item.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Sales_item book, sum;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; book)</span><br><span class="line">        sum += book;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; sum &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输入：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">0-201-78345-X 3 20.00</span><br><span class="line">0-201-78345-X 2 20.00</span><br><span class="line">0-201-78345-X 5 20.00</span><br><span class="line">^Z</span><br></pre></td></tr></table></figure>
<p>输出：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">10 200 20</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="1-5-2-初识成员函数"><a class="header-anchor" href="#1-5-2-初识成员函数">¶</a>1.5.2 初识成员函数</h4>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Sales_item.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Sales_item item1, item2;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; item1 &gt;&gt; item2;</span><br><span class="line">    <span class="comment">// 首先检查 item1 和 item2 是否表示相同的书</span></span><br><span class="line">    <span class="keyword">if</span>(item1.isbn() == item2.isbn()) &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; item1 + item2 &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0l</span>;                <span class="comment">// 表示成功</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cerr</span> &lt;&lt; <span class="string">"Data must refer to same ISBN"</span></span><br><span class="line">                  &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;   <span class="comment">// 表示失败</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="什么是成员函数"><a class="header-anchor" href="#什么是成员函数">¶</a>什么是成员函数</h5>
<p>当用 <code>.</code> 运算符访问一个成员函数时，通常我们是想 (效果也确实是) 调用该函数。我们使用 <strong>调用运算符</strong> (<code>(</code> <code>)</code>) 来调用一个函数。调用运算符是一对圆括号，里面放置 <strong>实参</strong> (argument) 列表 (<strong>可能为空</strong>)。</p>
<h5 id="1-5-2-节练习"><a class="header-anchor" href="#1-5-2-节练习">¶</a>1.5.2 节练习</h5>
<ul>
<li>
<p>练习 1.23：编写程序，读取多条销售记录，并统计每个 ISBN (每本书) 有几条销售记录。</p>
<p>解：</p>
<blockquote>
<p>提示：使用文件重定向。</p>
</blockquote>
  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Sales_item.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Sales_item currItem, item;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; currItem) &#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; item) &#123;</span><br><span class="line">            <span class="keyword">if</span>(item.isbn() == currItem.isbn())</span><br><span class="line">                currItem += item;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Sale amount of "</span> &lt;&lt; currItem.isbn() &lt;&lt; <span class="string">" is:"</span> &lt;&lt; currItem &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">                currItem = item;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Sale amount of "</span> &lt;&lt; currItem.isbn() &lt;&lt; <span class="string">" is:"</span> &lt;&lt; currItem &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输入：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">0-201-78345-X 4 25.0</span><br><span class="line">0-201-78345-X 1 25.0</span><br><span class="line">0-201-78345-X 2 25.0</span><br><span class="line">0-201-78345-X 9 25.0</span><br><span class="line">0-207-78345-X 9 31.0</span><br><span class="line">0-207-78345-X 3 31.0</span><br><span class="line">0-202-78345-X 3 20.0</span><br><span class="line">0-202-78345-X 3 20.0</span><br></pre></td></tr></table></figure>
<p>输出：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Sale amount of 0-201-78345-X is:0-201-78345-X 16 400 25</span><br><span class="line">Sale amount of 0-207-78345-X is:0-207-78345-X 12 372 31</span><br><span class="line">Sale amount of 0-202-78345-X is:0-202-78345-X 6 120 20</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>练习 1.24：输入表示多个 ISBN 的多条销售记录来测试上一个程序，每个 ISBN 的记录应该聚在一起。</p>
<p>解：</p>
<p>见练习 1.23。</p>
</li>
</ul>
<h3 id="1-6-书店程序"><a class="header-anchor" href="#1-6-书店程序">¶</a>1.6 书店程序</h3>
<p>我们的程序会将每个 ISBN 的所有数据合并起来，存入名为 <code>total</code> 变量中。我们使用另一个名为 <code>trans</code> 的变量保存读取的每条销售记录。如果 <code>trans</code> 和 <code>total</code> 指向相同的 ISBN，我们会更新 <code>total</code> 的值。否则，我们会打印 <code>total</code> 的值，并将其重置为刚读取的数据 (<code>tran</code>)：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Sales_item.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Sales_item total;  <span class="comment">// 保存下一条交易记录的变量</span></span><br><span class="line">    <span class="comment">// 读入第一条交易记录，并确保有数据可以处理</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; total) &#123;</span><br><span class="line">        Sales_item trans;  <span class="comment">// 保存和的变量</span></span><br><span class="line">        <span class="comment">// 读入并处理剩余交易记录</span></span><br><span class="line">        <span class="keyword">while</span>(<span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; trans) &#123;</span><br><span class="line">            <span class="comment">// 如果我们仍在处理相同的书</span></span><br><span class="line">            <span class="keyword">if</span>(total.isbn() == trans.isbn())</span><br><span class="line">                total += trans;  <span class="comment">//更新总销售额</span></span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// 打印前一本书的结果</span></span><br><span class="line">                <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; total &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">                total = trans;  <span class="comment">// total 现在表示下一本书的销售额</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; total &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 没有输入！警告读者</span></span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cerr</span> &lt;&lt; <span class="string">"No data?!"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="1-6-节练习"><a class="header-anchor" href="#1-6-节练习">¶</a>1.6 节练习</h4>
<ul>
<li>
<p>练习 1.25：借助网站上的 <em>Sales_item.h</em> 头文件，编译并运行本节给出的书店程序。</p>
<p>解：</p>
<p>输入：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">0-201-78345-X 4 25.0</span><br><span class="line">0-201-78345-X 1 25.0</span><br><span class="line">0-201-78345-X 2 25.0</span><br><span class="line">0-201-78345-X 9 25.0</span><br><span class="line">0-207-78345-X 9 31.0</span><br><span class="line">0-207-78345-X 3 31.0</span><br><span class="line">0-202-78345-X 3 20.0</span><br><span class="line">0-202-78345-X 3 20.0</span><br></pre></td></tr></table></figure>
<p>输出：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0-201-78345-X 16 400 25</span><br><span class="line">0-207-78345-X 12 372 31</span><br><span class="line">0-202-78345-X 6 120 20</span><br></pre></td></tr></table></figure>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.rabbituzki.com.cn/2020/02/18/C++-Primer-%E7%AC%AC%E4%BA%94%E7%89%88%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/" data-id="ckidvv5c200003sv43bdf10h2" class="article-share-link">
        分享
      </a>
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C++</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" rel="tag">编程语言</a></li></ul>

    </footer>

  </div>

  
  
  <nav class="article-nav">
    
      <a href="/2020/02/19/OpenSSL-%E8%87%AA%E7%AD%BE%E5%8F%91%E9%85%8D%E7%BD%AE%E6%9C%89%E5%A4%9A%E5%9F%9F%E5%90%8D%E6%88%96-IP-%E5%9C%B0%E5%9D%80%E7%9A%84%E8%AF%81%E4%B9%A6/" class="article-nav-link">
        <strong class="article-nav-caption">前一篇</strong>
        <div class="article-nav-title">
          
            OpenSSL 自签发配置有多域名或 IP 地址的证书
          
        </div>
      </a>
    
    
      <a href="/2020/02/18/C++-Primer-%E7%AC%AC%E4%BA%94%E7%89%88%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/" class="article-nav-link">
        <strong class="article-nav-caption">后一篇</strong>
        <div class="article-nav-title">《C++ Primer （第五版）》学习笔记 -- 之二</div>
      </a>
    
  </nav>


  

  
  
  
  

</article>
</section>
  <footer class="footer">
  <div class="outer">
    <div class="float-right">
      <ul class="list-inline">
  
    <li><i class="fe fe-smile-alt"></i> <span id="busuanzi_value_site_uv"></span></li>
  
    <li><i class="fe fe-bookmark"></i> <span id="busuanzi_value_page_pv"></span></li>
  
</ul>
    </div>
    <ul class="list-inline">
      <li>&copy; 2020 六加的博客</li>
      <li>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></li>
      <li>Theme  <a href="https://github.com/zhwangart/hexo-theme-ocean" target="_blank" rel="noopener">Ocean</a></li>
    </ul>
  </div>
</footer>

</main>
<aside class="sidebar">
  <button class="navbar-toggle"></button>
<nav class="navbar">
  
    <div class="logo">
      <a href="/"><img src="/images/hexo.svg" alt="六加的博客"></a>
    </div>
  
  <ul class="nav nav-main">
    
      <li class="nav-item">
        <a class="nav-item-link" href="/">Home</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/archives">Archives</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/gallery">Gallery</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/about">About</a>
      </li>
    
    <li class="nav-item">
      <a class="nav-item-link nav-item-search" title="搜索">
        <i class="fe fe-search"></i>
        搜索
      </a>
    </li>
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      <div class="totop" id="totop">
  <i class="fe fe-rocket"></i>
</div>
    </li>
    <li class="nav-item">
      
        <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
          <i class="fe fe-feed"></i>
        </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
</aside>

<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/jquery.justifiedGallery.min.js"></script>


<script src="/js/lazyload.min.js"></script>


<script src="/js/busuanzi-2.3.pure.min.js"></script>


  
<script src="/fancybox/jquery.fancybox.min.js"></script>




  
<script src="/js/tocbot.min.js"></script>

  <script>
    // Tocbot_v4.7.0  http://tscanlin.github.io/tocbot/
    tocbot.init({
      tocSelector: '.tocbot',
      contentSelector: '.article-entry',
      headingSelector: 'h1, h2, h3, h4, h5, h6',
      hasInnerContainers: true,
      scrollSmooth: true,
      positionFixedSelector: '.tocbot',
      positionFixedClass: 'is-position-fixed',
      fixedSidebarOffset: 'auto',
    });
  </script>



<script src="/js/ocean.js"></script>


</body>
</html>


<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/images/favicon.ico">
  <link rel="icon" type="image/png" href="/images/favicon.ico">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="When in doubt, use brute force.">
  <meta name="author" content="Rabbituzki">
  <meta name="keywords" content="">
  <title>《Learn Emacs in 21 days》学习笔记 - Rabbituzki 的笔记们</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/styles/gruvbox-dark.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"blog.rabbituzki.com.cn","root":"/","version":"1.8.6","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":true},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":"❡"},"copy_btn":true,"image_zoom":{"enable":true},"lazyload":{"enable":true,"onlypost":false},"web_analytics":{"enable":true,"baidu":"a9b0666290f750544a1900dff36c0349","google":"UA-127726236-2","gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"TMgxzCpM2zFnsClsMHJY2LLc-gzGzoHsz","app_key":"1kPLieLtoBQWf0w6iNxLqkMV","server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 4.2.1"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Rabbituzki 的笔记们</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner intro-2" id="background" parallax=true
         style="background: url('/images/background1.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="《Learn Emacs in 21 days》学习笔记">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2019-10-06 00:00" pubdate>
        2019年10月6日 凌晨
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      3.9k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      56
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">《Learn Emacs in 21 days》学习笔记</h1>
            
            <div class="markdown-body">
              <p>[TOC]</p>
<hr>
<h1>《Learn Emacs in 21 days》学习笔记</h1>
<h2 id="第一天"><a class="header-anchor" href="#第一天">¶</a>第一天</h2>
<h3 id="配置文件-init-el"><a class="header-anchor" href="#配置文件-init-el">¶</a>配置文件(init.el)</h3>
<ul>
<li>
<p>配置文件默认位置为 <em>$HOME/.emacs.d/init.el</em></p>
<blockquote>
<p>Windows 下需要设置环境变量<code>HOME</code>，若不设置，默认为 <em>%USERPROFILE%\.emacs.d\init.el</em> 或 <em>%APPDATA%\.emacs.d\init.el</em>。</p>
</blockquote>
</li>
<li>
<p>手动指定配置文件位置<br>
编辑 <em>$HOME/.emacs.d/init.el</em> (Windows 下为 <em>%USERPROFILE%\.emacs.d\init.el</em> 或 <em>%APPDATA%\.emacs.d\init.el</em>)：</p>
</li>
</ul>
<figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp"><span class="hljs-comment">;; This file is only for windows 7/8/8.1</span><br><span class="hljs-comment">;; The only thing it does is to set the HOME directories for emacs,</span><br><span class="hljs-comment">;; then trigger the init.el in the directory specified by HOME to</span><br><span class="hljs-comment">;; accomplish the true initialization</span><br><span class="hljs-comment">;; You should put this file in the default HOME directory right after</span><br><span class="hljs-comment">;; emacs is installed</span><br>(<span class="hljs-name">setenv</span> <span class="hljs-string">"HOME"</span> <span class="hljs-string">"C:/Users/Carzpurzkey"</span>) <span class="hljs-comment">;; you can change this dir to the place you like</span><br>(<span class="hljs-name">load</span> <span class="hljs-string">"~/.emacs.d/init.el"</span>)<br></code></pre></div></td></tr></table></figure>
<ul>
<li>基础配置</li>
</ul>
<figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp"><span class="hljs-comment">; 关闭工具栏</span><br>(<span class="hljs-name">tool-bar-mode</span> <span class="hljs-number">-1</span>)<br><span class="hljs-comment">; 关闭滚动条</span><br>(<span class="hljs-name">scroll-bar-mode</span> <span class="hljs-number">-1</span>)<br><br>(<span class="hljs-name">electric-indent-mode</span> <span class="hljs-number">-1</span>)<br><br><span class="hljs-comment">; 关闭欢迎画面</span><br>(<span class="hljs-name">setq</span> inhibit-splash-screen <span class="hljs-literal">t</span>)<br><br><span class="hljs-comment">; 启用全局行号</span><br>(<span class="hljs-name">global-linum-mode</span> <span class="hljs-literal">t</span>)<br><br><span class="hljs-comment">; 启用全局company-mode</span><br>(<span class="hljs-name">global-company-mode</span> <span class="hljs-literal">t</span>)<br><br><span class="hljs-comment">; 启用全局条状光标</span><br>(<span class="hljs-name">setq-default</span> cursor-type 'bar)<br><br><span class="hljs-comment">; 禁用自动文件备份</span><br>(<span class="hljs-name">setq</span> make-backup-files <span class="hljs-literal">nil</span>)<br></code></pre></div></td></tr></table></figure>
<h3 id="前缀键-Leading-Key"><a class="header-anchor" href="#前缀键-Leading-Key">¶</a>前缀键 (Leading Key)</h3>
<ul>
<li>
<p><code>C-x</code> 执行快捷键命令</p>
<ol>
<li><code>C-x C-e</code>
<ul>
<li>立即执行光标所在位置 elisp 脚本（光标必须在 sexp 尾部）。</li>
<li>运行上一个 sexp（即执行 <code>eval-last-sexp</code> 命令）。</li>
</ul>
</li>
<li><code>C-x C-f</code> 打开文件。</li>
<li><code>C-x C-s</code> 保存文件。</li>
<li><code>C-x 2</code> 在下方新建窗口。</li>
<li><code>C-x 3</code> 在右侧新建窗口。</li>
<li><code>C-x 1</code> 关闭当前窗口之外的所有窗口。</li>
<li><code>C-x b</code> 切换 buffers。</li>
<li><code>C-x k</code> 删除当前buffer。</li>
<li><code>C-x o</code> 切换窗口。</li>
</ol>
</li>
<li>
<p><code>C-h</code> 帮助</p>
<ol>
<li><code>C-h v</code> 查询变量信息。</li>
<li><code>C-h f</code> 查询函数信息。</li>
<li><code>C-h k</code> 查询键绑定信息。</li>
</ol>
</li>
<li>
<p><code>C-c</code> 自定义快捷键</p>
<ul>
<li>
<p>org-mode：</p>
<ul>
<li>
<p><code>C-c t</code> 切换 TODO 状态。</p>
</li>
<li>
<p><code>C-c '</code> 当光标处于块</p>
<div class="hljs code-wrapper"><pre><code>  <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">#+BEGIN_SRC language<br>#+END_SRC<br></code></pre></div></td></tr></table></figure>
</code></pre>
<p>中间时，按 <code>C-c '</code> 则会在新 <em>buffer</em> 中以 <code>language</code> minar mode 编辑块中内容。</p>
</li>
<li>
<p><code>C-c C-s</code> 制定计划，指定开始时间。</p>
</li>
<li>
<p><code>C-c C-d</code> 制定计划，指定 dead line。</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>M-x</code> 在 <em>minibuffer</em> 执行文字命令。</p>
</li>
<li>
<p>其它</p>
<ol>
<li><code>C-a</code> 定位至行首。</li>
<li><code>C-e</code> 定位至行尾。</li>
<li><code>C-f</code> 光标前移一个字符。</li>
<li><code>C-p</code> 光标上移一行。</li>
<li><code>C-n</code> 光标下移一行。</li>
<li><code>C-s</code> 搜索。</li>
<li><code>C-g</code> 终止一切未完成的操作。</li>
<li><code>M-Enter</code> 自动修正序号。</li>
</ol>
</li>
</ul>
<h2 id="第二天"><a class="header-anchor" href="#第二天">¶</a>第二天</h2>
<h3 id="继续定制配置文件"><a class="header-anchor" href="#继续定制配置文件">¶</a>继续定制配置文件</h3>
<ol>
<li>
<p>org-mode：</p>
<ul>
<li>
<p>启用：</p>
<div class="hljs code-wrapper"><pre><code>  <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">require</span> 'org)<br></code></pre></div></td></tr></table></figure>
</code></pre>
</li>
<li>
<p>使块 <code>#+BEGIN_SRC</code> <code>#+END_SRC</code> 之间的代码有语法高亮：</p>
<div class="hljs code-wrapper"><pre><code>  <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">require</span> 'org)<br>(<span class="hljs-name">setq</span> org-src-fontify-natively <span class="hljs-literal">t</span>)<br></code></pre></div></td></tr></table></figure>
</code></pre>
</li>
<li>
<p><code>&lt;s</code> + <code>tab键</code> 自动插入 <code>#+BEGIN_SRC language</code> <code>#+END_SRC</code> 块。</p>
</li>
<li>
<p>Agenda</p>
<ul>
<li>
<p>启用及配置</p>
  <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">setq</span> org-agenda-files '(<span class="hljs-string">"~/org-agenda"</span>))<br>(<span class="hljs-name">global-set-key</span> (<span class="hljs-name">kbd</span> <span class="hljs-string">"C-c a"</span>) 'org-agenda)<br></code></pre></div></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>开启“最近打开的文件”功能：</p>
 <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">require</span> 'recentf)<br>(<span class="hljs-name">recentf-mode</span> <span class="hljs-literal">t</span>)<br>(<span class="hljs-name">setq</span> recentf-max-menu-items <span class="hljs-number">25</span>)<br>(<span class="hljs-name">global-set-key</span> <span class="hljs-string">"\C-x\ \C-r"</span> 'recentf-open-files)<br></code></pre></div></td></tr></table></figure>
</li>
<li>
<p>使选中区域切换为替换模式：</p>
 <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">delete-selection-mode</span> <span class="hljs-literal">t</span>)<br></code></pre></div></td></tr></table></figure>
</li>
<li>
<p>打开 Emacs 时自动全屏显示：</p>
 <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">setq</span> initial-frame-alist (<span class="hljs-name">quote</span> ((fullscreen . maximized))))<br></code></pre></div></td></tr></table></figure>
</li>
<li>
<p>高亮括号匹配：</p>
 <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">add-hook</span> 'emacs-lisp-mode-hook 'show-parent-mode)<br></code></pre></div></td></tr></table></figure>
</li>
<li>
<p>高亮当前行：</p>
 <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">global-hl-line-mode</span> <span class="hljs-literal">t</span>)<br></code></pre></div></td></tr></table></figure>
</li>
<li>
<p>加载主题：</p>
 <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">load-theme</span> 'dracula <span class="hljs-literal">t</span>)<br></code></pre></div></td></tr></table></figure>
</li>
<li>
<p>hungry delete：</p>
 <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">require</span> 'hungry-delete)<br>(<span class="hljs-name">global-hungry-delete-mode</span> <span class="hljs-literal">t</span>)<br></code></pre></div></td></tr></table></figure>
</li>
<li>
<p>smex：<br>
smex 是 <code>M-x</code> 的扩展</p>
 <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">require</span> 'smex)<br>(<span class="hljs-name">smex-initialize</span>)<br>(<span class="hljs-name">global-set-key</span> (<span class="hljs-name">kbd</span> <span class="hljs-string">"M-x"</span>) 'smex)<br>(<span class="hljs-name">global-set-key</span> (<span class="hljs-name">kbd</span> <span class="hljs-string">"M-x"</span>) 'smex-major-mode-commands)<br>(<span class="hljs-name">global-set-key</span> (<span class="hljs-name">kbd</span> <span class="hljs-string">"C-c C-c M-x"</span>) 'execute-extended-command)<br></code></pre></div></td></tr></table></figure>
</li>
<li>
<p>swiper：<br>
swiper 是 <code>C-s</code> 的扩展：</p>
<figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">ivy-mode</span> <span class="hljs-literal">t</span>)<br>(<span class="hljs-name">setq</span> ivy-use-virtual-buffers <span class="hljs-literal">t</span>)<br>(<span class="hljs-name">global-set-key</span> <span class="hljs-string">"\C-s"</span> 'swiper)<br>(<span class="hljs-name">global-set-key</span> (<span class="hljs-name">kbd</span> <span class="hljs-string">"C-c C-r"</span>) 'ivy-resume)<br>(<span class="hljs-name">global-set-key</span> (<span class="hljs-name">kbd</span> <span class="hljs-string">"&lt;f6&gt;"</span>) 'ivy-resume)<br>(<span class="hljs-name">global-set-key</span> (<span class="hljs-name">kbd</span> <span class="hljs-string">"M-x"</span>) 'counsel-M-x)<br>(<span class="hljs-name">global-set-key</span> (<span class="hljs-name">kbd</span> <span class="hljs-string">"C-x C-f"</span>) 'counsel-find-file)<br>(<span class="hljs-name">global-set-key</span> (<span class="hljs-name">kbd</span> <span class="hljs-string">"&lt;f1&gt; f"</span>) 'counsel-describe-function)<br>(<span class="hljs-name">global-set-key</span> (<span class="hljs-name">kbd</span> <span class="hljs-string">"&lt;f1&gt; v"</span>) 'counsel-describe-variable)<br>(<span class="hljs-name">global-set-key</span> (<span class="hljs-name">kbd</span> <span class="hljs-string">"C-c g"</span>) 'counsel-git)<br></code></pre></div></td></tr></table></figure>
</li>
<li>
<p>smartparens：<br>
smartparens 可以自动补全括号及各种引号：</p>
<figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">smartparens-global-mode</span> <span class="hljs-literal">t</span>)<br></code></pre></div></td></tr></table></figure>
</li>
<li>
<p><code>find-function</code> 和 <code>find-variable</code> 函数</p>
</li>
</ol>
<ul>
<li>
<p><code>find-function</code> 函数查看函数定义。</p>
</li>
<li>
<p><code>find-variable</code> 函数查看变量定义。</p>
</li>
<li>
<p><code>find-function-on-key</code> 函数查看指定的快捷键绑定在了哪个函数上。</p>
<p>定义以上函数快捷键：</p>
  <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">global-set-key</span> (<span class="hljs-name">kbd</span> <span class="hljs-string">"C-h C-f"</span>) 'find-function)<br>(<span class="hljs-name">global-set-key</span> (<span class="hljs-name">kbd</span> <span class="hljs-string">"C-h C-v"</span>) 'find-variable)<br>(<span class="hljs-name">global-set-key</span> (<span class="hljs-name">kbd</span> <span class="hljs-string">"C-h C-k"</span>) 'find-function-on-key)<br></code></pre></div></td></tr></table></figure>
</li>
</ul>
<h3 id="require-命令"><a class="header-anchor" href="#require-命令">¶</a><code>require</code> 命令</h3>
<ul>
<li><code>require</code> 命令会从一个文件加载一个特性(feature)。如果未提供文件名，那么 <code>require</code> 命令会将第一个参数同时作为特性名和文件名。</li>
<li><code>require</code> 命令内部调用的是 <code>load</code> 命令。</li>
</ul>
<h3 id="eval-buffer-命令"><a class="header-anchor" href="#eval-buffer-命令">¶</a><code>eval-buffer</code> 命令</h3>
<p><code>eval-buffer</code> 命令会执行当前整个 <em>buffer</em> 中的所有命令。</p>
<h3 id="hook"><a class="header-anchor" href="#hook">¶</a>hook</h3>
<p><code>add-hook</code> 函数：</p>
<p>使用：</p>
<figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">add-hook</span> 'hook-name 'hook-function-or-mode)<br></code></pre></div></td></tr></table></figure>
<blockquote>
<p><code>hook-name</code> 代表将在哪个 mode 中添加 hook。例如 <code>emacs-lisp-mode-hook</code>。</p>
</blockquote>
<h3 id="改进-package-系统"><a class="header-anchor" href="#改进-package-系统">¶</a>改进 package 系统</h3>
<figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">when</span> (<span class="hljs-name">&gt;=</span> emacs-major-version <span class="hljs-number">24</span>)<br>    (<span class="hljs-name">require</span> 'package)<br>    (<span class="hljs-name">package-initialize</span>)<br>    (<span class="hljs-name">setq</span> package-archives '((<span class="hljs-string">"gnu"</span>   . <span class="hljs-string">"http://mirrors.tuna.tsinghua.edu.cn/elpa/gnu/"</span>)<br>                             (<span class="hljs-string">"melpa"</span> . <span class="hljs-string">"http://mirrors.tuna.tsinghua.edu.cn/elpa/melpa/"</span>))))<br><br><span class="hljs-comment">;; cl - Common Lisp Extension</span><br>(<span class="hljs-name">require</span> 'cl)<br><span class="hljs-comment">;; Add Packages</span><br>(<span class="hljs-name">defvar</span> my/packages '(<br>    ;; --- Auto-completion ---<br>    company<br><br>    ;; --- Better Editor ---<br>    hungry-delete<br>    swiper<br>    counsel<br>    smartparens<br>	smex<br><br>    ;; --- Major Mode ---<br>    js2-mode<br><br>	;; --- Minor Mode ---<br>	nodejs-repl<br>	exec-path-from-shell<br><br>	;; --- Themes ---<br>	;; monokai-theme<br>	;; solarized-theme<br>    dracula-theme<br><br>	) <span class="hljs-string">"Default packages"</span>)<br><br><span class="hljs-comment">;; 添加此行防止 package-autoremove 命令自动删除第三方 package</span><br>(<span class="hljs-name">setq</span> package-selected-packages my/packages)<br><br>(<span class="hljs-name">defun</span> my/packages-installed-p ()<br>    (<span class="hljs-name">loop</span> for pkg in my/packages<br>        when (<span class="hljs-name">not</span> (<span class="hljs-name">package-installed-p</span> pkg)) do (<span class="hljs-name">return</span> <span class="hljs-literal">nil</span>)<br>        finally (<span class="hljs-name">return</span> <span class="hljs-literal">t</span>)))<br><br>(<span class="hljs-name">unless</span> (<span class="hljs-name">my/packages-installed-p</span>)<br>    (<span class="hljs-name">message</span> <span class="hljs-string">"%s"</span> <span class="hljs-string">"Refreshing package database..."</span>)<br>    (<span class="hljs-name">package-refresh-contents</span>)<br>    (<span class="hljs-name">dolist</span> (<span class="hljs-name">pkg</span> my/packages)<br>        (<span class="hljs-name">when</span> (<span class="hljs-name">not</span> (<span class="hljs-name">package-installed-p</span> pkg))<br>            (<span class="hljs-name">package-install</span> pkg))))<br></code></pre></div></td></tr></table></figure>
<h3 id="package-list-packages-命令"><a class="header-anchor" href="#package-list-packages-命令">¶</a><code>package-list-packages</code> 命令</h3>
<p>执行 <code>M-x package-list-packages</code> 命令后，会打开一个新的名为 <em>*Packages*</em> 的 <em>buffer</em> 。</p>
<ul>
<li>在 <em>*Packages*</em> <em>buffer</em> 中，按 <code>I</code> 标记将要被安装的包；按 <code>U</code> 取消被标记为将被安装的包；</li>
<li>在 <em>*Packages*</em> <em>buffer</em> 中，按 <code>D</code> 标记将要卸载的包。</li>
<li>在 <em>*Packages*</em> <em>buffer</em> 中，按 <code>U</code> 标记将要更新的包。</li>
<li>在 <em>*Packages*</em> <em>buffer</em> 中，按 <code>X</code> 执行上述标记。</li>
</ul>
<h3 id="customize-group-命令"><a class="header-anchor" href="#customize-group-命令">¶</a><code>customize-group</code> 命令</h3>
<p><code>customize-group</code> 命令用来以更直观的方式配置插件参数并保存至 emacs 配置文件。</p>
<h3 id="更改默认-mode"><a class="header-anchor" href="#更改默认-mode">¶</a>更改默认 mode</h3>
<p>通过更改 <code>auto-mode-alist</code> 变量可以改变自动加载的 mode：</p>
<figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp"><span class="hljs-comment">;; 将 Javascript 文件默认的 Javascript Major Mode 更改为 js2-mode</span><br>(<span class="hljs-name">setq</span> auto-mode-alist<br>    (<span class="hljs-name">append</span><br>        '((<span class="hljs-string">"\\.js\\'"</span> . js2-mode))<br>        auto-mode-alist))<br></code></pre></div></td></tr></table></figure>
<h2 id="第三天"><a class="header-anchor" href="#第三天">¶</a>第三天</h2>
<h3 id="继续定制配置文件-v2"><a class="header-anchor" href="#继续定制配置文件-v2">¶</a>继续定制配置文件</h3>
<ol>
<li>
<p>自动重新加载外部修改文件：</p>
 <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">global-auto-revert-mode</span> <span class="hljs-literal">t</span>)<br></code></pre></div></td></tr></table></figure>
</li>
<li>
<p>禁用文件自动保存</p>
 <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">setq</span> auto-save-default <span class="hljs-literal">nil</span>)<br></code></pre></div></td></tr></table></figure>
</li>
<li>
<p>popwin：</p>
 <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">require</span> 'popwin)<br>(<span class="hljs-name">popwin-mode</span> <span class="hljs-literal">t</span>)<br></code></pre></div></td></tr></table></figure>
</li>
<li>
<p>abbrev-mode</p>
<p>abbrev-mode 可以定义一个用以简化自动补全的缩写。</p>
<ul>
<li>
<p>启用：</p>
  <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">abbrev-mode</span> <span class="hljs-literal">t</span>)<br></code></pre></div></td></tr></table></figure>
</li>
<li>
<p>定义缩写列表：</p>
  <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">define-abbrev-table</span> 'global-abbrev-table '(<br>	(<span class="hljs-string">"8zl"</span> <span class="hljs-string">"zilongshanren"</span>)))<br></code></pre></div></td></tr></table></figure>
</li>
<li>
<p>关闭触底/顶声音提示</p>
  <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">setq</span> ring-bell-function 'ignore)<br></code></pre></div></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h3 id="autoload-魔法注释"><a class="header-anchor" href="#autoload-魔法注释">¶</a><code>;;;###autoload</code> 魔法注释</h3>
<p>当我们调用 <code>(package-initialize)</code> 时，其会遍历 <em>elpa</em> 目录中的 packages、读取该 package 目录下的 <em>*.el</em> 文件。根据 <code>;;;###autoload</code> 注释，<code>(package-initialize)</code> 会生成一个包含所有自动加载项的 el 文件。<br>
通过添加 <code>;;;###autoload</code> 魔法注释，emacs 便可以不调用 <code>(require 'mode-name)</code> 而是直接使用 <code>(global-mode-name t)</code> 来启用 package。</p>
<h3 id="load-命令"><a class="header-anchor" href="#load-命令">¶</a><code>load</code> 命令</h3>
<p><code>load package-name</code> 命令使用如下顺序在 <code>load-path</code> 变量指定的目录中查找一个包并加载：</p>
<blockquote>
<p>package-name.elc -&gt; package-name.el -&gt; package-name.gz</p>
</blockquote>
<p>找不到则报错。</p>
<h3 id="load-file-命令"><a class="header-anchor" href="#load-file-命令">¶</a><code>load-file</code> 命令</h3>
<p>在指定的目录查找并加载 package。</p>
<h3 id="features-变量"><a class="header-anchor" href="#features-变量">¶</a><code>features</code> 变量</h3>
<p>一个 package 可以通过 <code>provide</code> 向 <code>features</code> 变量添加自己的包名来“导出”自己，然后 emacs 便可以通过 <code>require</code> 命令读取 <code>features</code> 变量“导入”这个 package。</p>
<h3 id="多文件存储配置"><a class="header-anchor" href="#多文件存储配置">¶</a>多文件存储配置</h3>
<h4 id="load-path-变量"><a class="header-anchor" href="#load-path-变量">¶</a><code>load-path</code> 变量</h4>
<ul>
<li><code>load-path</code> 是一个 <code>list</code> 型变量且默认不包含 <em>~/.emacs.d</em>。</li>
<li>可以通过 <code>(add-to-list 'load-path &quot;custom-configuration-file-path&quot;)</code> 将自定义配置文件所在目录添加到 <code>load-path</code> 中。</li>
</ul>
<h4 id="指定由-customize-group-生成的配置项存储文件"><a class="header-anchor" href="#指定由-customize-group-生成的配置项存储文件">¶</a>指定由 <code>customize-group</code> 生成的配置项存储文件</h4>
<figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">setq</span> custom-file (<span class="hljs-name">expand-file-name</span> <span class="hljs-string">"configuration-file-path-relative-to-init.el-path"</span> user-emacs-directory))<br>(<span class="hljs-name">load-file</span> custom-file)<br></code></pre></div></td></tr></table></figure>
<h3 id="major-mode-和-minar-mode"><a class="header-anchor" href="#major-mode-和-minar-mode">¶</a>major mode 和 minar mode</h3>
<p>major mode 分为以下三类：</p>
<ul>
<li>text-mode：普通文本模式。</li>
<li>special-mode：特殊模式。用的较少。</li>
<li>prog-mode：编程语言模式。如上述 js2-mode 便从 prog-mode 继承。</li>
</ul>
<h2 id="第四天"><a class="header-anchor" href="#第四天">¶</a>第四天</h2>
<h3 id="indent-region-命令"><a class="header-anchor" href="#indent-region-命令">¶</a><code>indent-region</code> 命令</h3>
<ul>
<li>
<p>签名：</p>
  <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">indent-region</span> START END <span class="hljs-symbol">&amp;optional</span> COLUMN)<br></code></pre></div></td></tr></table></figure>
<p>当我们选中部分文本后，<code>START</code> 和 <code>END</code> 既为选中区域的开头和结尾。</p>
</li>
<li>
<p>使用示例</p>
  <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">defun</span> indent-buffer()<br>	(<span class="hljs-name">interactive</span>)<br>	(<span class="hljs-name">indent-region</span> (<span class="hljs-name">point-min</span>) (<span class="hljs-name">point-max</span>)))<br>	<br>(<span class="hljs-name">defun</span> indent-region-or-buffer()<br>   (<span class="hljs-name">interactive</span>)<br>   (<span class="hljs-name">save-excursion</span>    <span class="hljs-comment">;; save-excursion：保存光标位置，执行子语句后恢复光标位置。</span><br>       (<span class="hljs-name">if</span> (<span class="hljs-name">region-active-p</span>)    <span class="hljs-comment">;; *-p：断言。</span><br>           (<span class="hljs-name">progn</span><br>               (<span class="hljs-name">indent-region</span> (<span class="hljs-name">region-beginning</span>) (<span class="hljs-name">region-end</span>))<br>               (<span class="hljs-name">message</span> <span class="hljs-string">"Indent selected region."</span>))<br>       (<span class="hljs-name">progn</span>    <span class="hljs-comment">;; 等价于 else。</span><br>           (<span class="hljs-name">indent-buffer</span>)<br>           (<span class="hljs-name">message</span> <span class="hljs-string">"Indent buffer."</span>)))))<br></code></pre></div></td></tr></table></figure>
</li>
</ul>
<h3 id="Dired-Mode"><a class="header-anchor" href="#Dired-Mode">¶</a>Dired Mode</h3>
<ul>
<li>
<p>Dired Mode 是一个强大的模式它能让我们完成和文件管理相关的所有操作。<br>
使用 <code>C-x d</code> 就可以进入 Dired Mode。<br>
常用操作：</p>
<ul>
<li><code>+</code> 创建目录</li>
<li><code>g</code> 刷新目录</li>
<li><code>C</code> 拷贝</li>
<li><code>D</code> 删除</li>
<li><code>R</code> 重命名</li>
<li><code>d</code> 标记删除</li>
<li><code>u</code> 取消标记</li>
<li><code>x</code> 执行所有的标记</li>
</ul>
</li>
<li>
<p>优化</p>
<ul>
<li>
<p>删除目录的时候 Emacs 会询问是否递归删除或拷贝， 这也有些麻烦我们可以用下面的配置将其设定为默认递归删除目录。</p>
  <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">setq</span> dired-recursive-deletes 'always)<br>(<span class="hljs-name">setq</span> dired-recursive-copies 'always)<br></code></pre></div></td></tr></table></figure>
</li>
<li>
<p>每一次你进入一个回车进入一个新的目录中是，一个新的缓冲区就会被建立。这使 得我们的缓冲区列表中充满了大量没有实际意义的记录。我们可以使用下面的代码，让 Emacs 重用唯一的一个缓冲区作为 Dired Mode 显示专用缓冲区。</p>
  <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">put</span> 'dired-find-alternate-file 'disabled <span class="hljs-literal">nil</span>)<br><br><span class="hljs-comment">;; 主动加载 Dired Mode</span><br><span class="hljs-comment">;; (require 'dired)</span><br><span class="hljs-comment">;; (defined-key dired-mode-map (kbd "RET") 'dired-find-alternate-file)</span><br><br><span class="hljs-comment">;; 延迟加载</span><br>(<span class="hljs-name">with-eval-after-load</span> 'dired<br>    (<span class="hljs-name">define-key</span> dired-mode-map (<span class="hljs-name">kbd</span> <span class="hljs-string">"RET"</span>) 'dired-find-alternate-file))<br></code></pre></div></td></tr></table></figure>
</li>
<li>
<p>使用 <code>(setq dired-dwin-target 1)</code> 则可以使当一个窗口（frame）中存在两个分屏 （window）时，将另一个分屏自动设置成拷贝地址的目标。</p>
</li>
</ul>
</li>
</ul>
<h3 id="org-mode-管理-Emacs-配置"><a class="header-anchor" href="#org-mode-管理-Emacs-配置">¶</a>org-mode 管理 Emacs 配置</h3>
<p>我们也可以使用 org 来管理 Emacs 的配置文件（笔者和他的师傅其实更倾向于模块管理配置文件）。</p>
<p>你需要将下面的代码放入配置入口文件 <em>init.el</em> 中，</p>
<figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">package-initialize</span>)<br><br>(<span class="hljs-name">require</span> 'org-install)<br>(<span class="hljs-name">require</span> 'ob-tangle)<br>(<span class="hljs-name">org-babel-load-file</span> (<span class="hljs-name">expand-file-name</span> <span class="hljs-string">"org-file-name.org"</span> user-emacs-directory))<br></code></pre></div></td></tr></table></figure>
<p>之后我们需要做的仅仅只是将所有的配置文件放入 Org 模式中的代码块即可，并使用目录 结构来表述你的配置文件再把它保存在与入口文件相同的目录中即可(文件名为 <em><a href="http://org-file-name.org" target="_blank" rel="noopener">org-file-name.org</a></em>)。Emacs 会提取其中的配置并使其生效。这样做的好处是可以使自 己和他人更直观的，理解你的配置文件或者代码。</p>
<h2 id="第五天"><a class="header-anchor" href="#第五天">¶</a>第五天</h2>
<h3 id="继续定制配置文件-v3"><a class="header-anchor" href="#继续定制配置文件-v3">¶</a>继续定制配置文件</h3>
<ol>
<li>
<p>取消引号自动配对：</p>
 <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">sp-local-pair</span> 'emacs-lisp-mode <span class="hljs-string">"'"</span> <span class="hljs-literal">nil</span> <span class="hljs-symbol">:actions</span> <span class="hljs-literal">nil</span>)<br>(<span class="hljs-name">sp-local-pair</span> 'lisp-interaction-mode <span class="hljs-string">"'"</span> <span class="hljs-literal">nil</span> <span class="hljs-symbol">:actions</span> <span class="hljs-literal">nil</span>)<br><br><span class="hljs-comment">;; 也可以把上面两句合起来</span><br>(<span class="hljs-name">sp-local-pair</span> '(emacs-lisp-mode lisp-interaction-mode) <span class="hljs-string">"'"</span> <span class="hljs-literal">nil</span> <span class="hljs-symbol">:actions</span> <span class="hljs-literal">nil</span>)<br></code></pre></div></td></tr></table></figure>
</li>
<li>
<p>show-paren-mode 可以使鼠标在括号上是高亮其所匹配的另一半括号，然而我们想要光标在括号内时就高亮包含内容的两个括号，使用下面的代码就可以做到这一点：</p>
 <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp"><span class="hljs-comment">;; define-advice宏：扩展一个函数，使其在执行过程中 (:around) 执行另外一些操作。</span><br>(<span class="hljs-name">define-advice</span> show-paren-function (<span class="hljs-symbol">:around</span> (<span class="hljs-name">fn</span>) fix-show-paren-function)<br>  <span class="hljs-string">"Highlight enclosing parens."</span><br>  (<span class="hljs-name">cond</span> ((<span class="hljs-name">looking-at-p</span> <span class="hljs-string">"\\s("</span>) (<span class="hljs-name">funcall</span> fn))<br>		(<span class="hljs-name">t</span> (<span class="hljs-name">save-excursion</span><br>	     (<span class="hljs-name">ignore-errors</span> (<span class="hljs-name">backward-up-list</span>))<br>	     (<span class="hljs-name">funcall</span> fn)))))<br></code></pre></div></td></tr></table></figure>
</li>
<li>
<p>解决在不同系统中的换行符，例如在 DOS 系统下的 <code>\r(^M)</code> 换行符， 这让我们有时候在 Unix 系统中很是头疼，因为它的存在会使版本控制误以为整行的代码都 被修改过而造成不必要的麻烦。（你可以在这里找到更多关于 <a href="http://unix.stackexchange.com/questions/32001/what-is-m-and-how-do-i-get-rid-of-it" target="_blank" rel="noopener">\r(^M)</a> 的信息）。</p>
<ul>
<li>
<p>方法一：隐藏</p>
  <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">defun</span> hidden-dos-eol ()<br>  <span class="hljs-string">"Do not show ^M in files containing mixed UNIX and DOS line endings."</span><br>  (<span class="hljs-name">interactive</span>)<br>  (<span class="hljs-name">unless</span> buffer-display-table<br>    (<span class="hljs-name">setq</span> buffer-display-table (<span class="hljs-name">make-display-table</span>)))<br>  (<span class="hljs-name">aset</span> buffer-display-table ?\^M []))<br></code></pre></div></td></tr></table></figure>
</li>
<li>
<p>方法二：删除</p>
  <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">defun</span> remove-dos-eol ()<br>  <span class="hljs-string">"Replace DOS eolns CR LF with Unix eolns CR"</span><br>  (<span class="hljs-name">interactive</span>)<br>  (<span class="hljs-name">goto-char</span> (<span class="hljs-name">point-min</span>))<br>  (<span class="hljs-name">while</span> (<span class="hljs-name">search-forward</span> <span class="hljs-string">"\r"</span> <span class="hljs-literal">nil</span> <span class="hljs-literal">t</span>) (<span class="hljs-name">replace-match</span> <span class="hljs-string">""</span>)))<br></code></pre></div></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h3 id="web-mode"><a class="header-anchor" href="#web-mode">¶</a>web-mode</h3>
<ul>
<li>
<p>安装</p>
  <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">defvar</span> xinyang/packages '(<br>			   ;; 你其他的插件在这里<br>			   web-mode<br>			   ) <span class="hljs-string">"Default packages"</span>)<br></code></pre></div></td></tr></table></figure>
</li>
<li>
<p>配置</p>
<ol>
<li>
<p>我们需要做的是将所有的 <em>*.html</em> 文件都使用 web-mode 来打开。</p>
 <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">setq</span> auto-mode-alist<br>      (<span class="hljs-name">append</span><br>       '((<span class="hljs-string">"\\.js\\'"</span> . js2-mode))<br>       '((<span class="hljs-string">"\\.html\\'"</span> . web-mode))<br>       auto-mode-alist))<br></code></pre></div></td></tr></table></figure>
</li>
</ol>
<p>这样所有的 HTML 代码在 Emacs 中就会之间启用 web-mode 而非默认的 HTML Mode 了。你可以阅读它的<a href="http://web-mode.org/" target="_blank" rel="noopener">文档</a>来学习更多 web-mode 详细的使用方法。</p>
<ol start="2">
<li>
<p>缩进的大小的设置。我们可以对不同的语言的缩减做出设置：</p>
 <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">defun</span> my-web-mode-indent-setup ()<br>  (<span class="hljs-name">setq</span> web-mode-markup-indent-offset <span class="hljs-number">4</span>) <span class="hljs-comment">; web-mode, html tag in html file</span><br>  (<span class="hljs-name">setq</span> web-mode-css-indent-offset <span class="hljs-number">4</span>)    <span class="hljs-comment">; web-mode, css in html file</span><br>  (<span class="hljs-name">setq</span> web-mode-code-indent-offset <span class="hljs-number">4</span>)   <span class="hljs-comment">; web-mode, js code in html file</span><br>  )<br>(<span class="hljs-name">add-hook</span> 'web-mode-hook 'my-web-mode-indent-setup)<br><br><span class="hljs-comment">;; 下面的函数可以用于在两个空格和四个空格之间进行切换</span><br>(<span class="hljs-name">defun</span> my-toggle-web-indent ()<br>  (<span class="hljs-name">interactive</span>)<br>  <span class="hljs-comment">;; web development</span><br>  (<span class="hljs-name">if</span> (<span class="hljs-name">or</span> (<span class="hljs-name">eq</span> major-mode 'js-mode) (<span class="hljs-name">eq</span> major-mode 'js2-mode))<br>      (<span class="hljs-name">progn</span><br>		(<span class="hljs-name">setq</span> js-indent-level (<span class="hljs-name">if</span> (<span class="hljs-name">=</span> js-indent-level <span class="hljs-number">2</span>) <span class="hljs-number">4</span> <span class="hljs-number">2</span>))<br>		(<span class="hljs-name">setq</span> js2-basic-offset (<span class="hljs-name">if</span> (<span class="hljs-name">=</span> js2-basic-offset <span class="hljs-number">2</span>) <span class="hljs-number">4</span> <span class="hljs-number">2</span>))))<br><br>  (<span class="hljs-name">if</span> (<span class="hljs-name">eq</span> major-mode 'web-mode)<br>      (<span class="hljs-name">progn</span> (<span class="hljs-name">setq</span> web-mode-markup-indent-offset (<span class="hljs-name">if</span> (<span class="hljs-name">=</span> web-mode-markup-indent-offset <span class="hljs-number">2</span>) <span class="hljs-number">4</span> <span class="hljs-number">2</span>))<br>		     (<span class="hljs-name">setq</span> web-mode-css-indent-offset (<span class="hljs-name">if</span> (<span class="hljs-name">=</span> web-mode-css-indent-offset <span class="hljs-number">2</span>) <span class="hljs-number">4</span> <span class="hljs-number">2</span>))<br>		     (<span class="hljs-name">setq</span> web-mode-code-indent-offset (<span class="hljs-name">if</span> (<span class="hljs-name">=</span> web-mode-code-indent-offset <span class="hljs-number">2</span>) <span class="hljs-number">4</span> <span class="hljs-number">2</span>))))<br>  (<span class="hljs-name">if</span> (<span class="hljs-name">eq</span> major-mode 'css-mode)<br>      (<span class="hljs-name">setq</span> css-indent-offset (<span class="hljs-name">if</span> (<span class="hljs-name">=</span> css-indent-offset <span class="hljs-number">2</span>) <span class="hljs-number">4</span> <span class="hljs-number">2</span>)))<br><br>  (<span class="hljs-name">setq</span> indent-tabs-mode <span class="hljs-literal">nil</span>))<br><br>(<span class="hljs-name">global-set-key</span> (<span class="hljs-name">kbd</span> <span class="hljs-string">"C-c t i"</span>) 'my-toggle-web-indent)<br></code></pre></div></td></tr></table></figure>
</li>
</ol>
</li>
</ul>
<h3 id="js2-refactor"><a class="header-anchor" href="#js2-refactor">¶</a>js2-refactor</h3>
<ol>
<li>
<p>安装</p>
 <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">defvar</span> xinyang/packages '(<br>			   ;; 你其他的插件在这里<br>			   js2-refactor<br>			   ) <span class="hljs-string">"Default packages"</span>)<br></code></pre></div></td></tr></table></figure>
</li>
<li>
<p>配置</p>
 <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">add-hook</span> 'js2-mode-hook #'js2-refactor-mode)<br>(<span class="hljs-name">js2r-add-keybindings-with-prefix</span> <span class="hljs-string">"C-c C-m"</span>)<br></code></pre></div></td></tr></table></figure>
</li>
</ol>
<h3 id="occur-mode"><a class="header-anchor" href="#occur-mode">¶</a>occur-mode</h3>
<p>occur 可以用于显示变量或函数的定义。</p>
<figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">defun</span> occur-dwim ()<br>  <span class="hljs-string">"Call `occur' with a sane default."</span><br>  (<span class="hljs-name">interactive</span>)<br>  (<span class="hljs-name">push</span> (<span class="hljs-name">if</span> (<span class="hljs-name">region-active-p</span>)<br>	  (<span class="hljs-name">buffer-substring-no-properties</span><br>		  (<span class="hljs-name">region-beginning</span>)<br>	      (<span class="hljs-name">region-end</span>))<br>		(<span class="hljs-name">let</span> ((<span class="hljs-name">sym</span> (<span class="hljs-name">thing-at-point</span> 'symbol)))<br>		    (<span class="hljs-name">when</span> (<span class="hljs-name">stringp</span> sym)<br>		      (<span class="hljs-name">regexp-quote</span> sym))))<br>		regexp-history)<br>  (<span class="hljs-name">call-interactively</span> 'occur))<br>	(<span class="hljs-name">global-set-key</span> (<span class="hljs-name">kbd</span> <span class="hljs-string">"C-c C-s o"</span>) 'occur-dwim)<br></code></pre></div></td></tr></table></figure>
<p>occur 与普通的搜索模式不同的是，它可以使用 Occur-Edit Mode (在弹出的窗口中按 <code>e</code> 进入编辑模式) 对搜索到的结果进行之间的编辑。</p>
<h3 id="imenu"><a class="header-anchor" href="#imenu">¶</a>imenu</h3>
<p>imenu 可以显示当前缓冲区所有符号的列表，下面的配置可以让其拥有更精确的跳转：</p>
<figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">defun</span> js2-imenu-make-index ()<br>	(<span class="hljs-name">interactive</span>)<br>    (<span class="hljs-name">save-excursion</span><br>	<span class="hljs-comment">;; (setq imenu-generic-expression '((nil "describe\\(\"\\(.+\\)\"" 1)))</span><br>	(<span class="hljs-name">imenu--generic-function</span> '((<span class="hljs-string">"describe"</span> <span class="hljs-string">"\\s-*describe\\s-*(\\s-*[\"']\\(.+\\)[\"']\\s-*,.*"</span> <span class="hljs-number">1</span>)<br>				   (<span class="hljs-string">"it"</span> <span class="hljs-string">"\\s-*it\\s-*(\\s-*[\"']\\(.+\\)[\"']\\s-*,.*"</span> <span class="hljs-number">1</span>)<br>				   (<span class="hljs-string">"test"</span> <span class="hljs-string">"\\s-*test\\s-*(\\s-*[\"']\\(.+\\)[\"']\\s-*,.*"</span> <span class="hljs-number">1</span>)<br>				   (<span class="hljs-string">"before"</span> <span class="hljs-string">"\\s-*before\\s-*(\\s-*[\"']\\(.+\\)[\"']\\s-*,.*"</span> <span class="hljs-number">1</span>)<br>				   (<span class="hljs-string">"after"</span> <span class="hljs-string">"\\s-*after\\s-*(\\s-*[\"']\\(.+\\)[\"']\\s-*,.*"</span> <span class="hljs-number">1</span>)<br>				   (<span class="hljs-string">"Function"</span> <span class="hljs-string">"function[ \t]+\\([a-zA-Z0-9_$.]+\\)[ \t]*("</span> <span class="hljs-number">1</span>)<br>				   (<span class="hljs-string">"Function"</span> <span class="hljs-string">"^[ \t]*\\([a-zA-Z0-9_$.]+\\)[ \t]*=[ \t]*function[ \t]*("</span> <span class="hljs-number">1</span>)<br>				   (<span class="hljs-string">"Function"</span> <span class="hljs-string">"^var[ \t]*\\([a-zA-Z0-9_$.]+\\)[ \t]*=[ \t]*function[ \t]*("</span> <span class="hljs-number">1</span>)<br>				   (<span class="hljs-string">"Function"</span> <span class="hljs-string">"^[ \t]*\\([a-zA-Z0-9_$.]+\\)[ \t]*()[ \t]*&#123;"</span> <span class="hljs-number">1</span>)<br>				   (<span class="hljs-string">"Function"</span> <span class="hljs-string">"^[ \t]*\\([a-zA-Z0-9_$.]+\\)[ \t]*:[ \t]*function[ \t]*("</span> <span class="hljs-number">1</span>)<br>				   (<span class="hljs-string">"Task"</span> <span class="hljs-string">"[. \t]task([ \t]*['\"]\\([^'\"]+\\)"</span> <span class="hljs-number">1</span>)))))<br>(<span class="hljs-name">add-hook</span> 'js2-mode-hook<br>	    (<span class="hljs-name">lambda</span> ()<br>			(<span class="hljs-name">setq</span> imenu-create-index-function 'js2-imenu-make-index)))<br><br>(<span class="hljs-name">global-set-key</span> (<span class="hljs-name">kbd</span> <span class="hljs-string">"C-c C-s i"</span>) 'counsel-imenu)<br></code></pre></div></td></tr></table></figure>
<h3 id="expand-region"><a class="header-anchor" href="#expand-region">¶</a>expand-region</h3>
<p>使用这个插件可以使我们更方便的选中一个区域。（更多使用方法和文档可以在<a href="https://github.com/magnars/expand-region.el" target="_blank" rel="noopener">这里</a>找到）。<br>
为其绑定一个快捷键：</p>
<figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">global-set-key</span> (<span class="hljs-name">kbd</span> <span class="hljs-string">"C-="</span>) 'er/expand-region)<br></code></pre></div></td></tr></table></figure>
<h3 id="iedit"><a class="header-anchor" href="#iedit">¶</a>iedit</h3>
<p>iedit 是一个可以同时编辑多个区域的插件，它类似 Sublime Text 中的多光标编辑。<br>
我们将其绑定快捷键以便更快捷的使用这个模式（ <code>C-;</code> 为默认快捷键），</p>
<figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">global-set-key</span> (<span class="hljs-name">kbd</span> <span class="hljs-string">"C-c C-s e"</span>) 'iedit-mode)<br></code></pre></div></td></tr></table></figure>
<p>我们可以使用 <code>customized-group</code> 来更改其高亮的背景色，将 <code>highlight</code> 改为 <code>region</code>。</p>
<h3 id="org-导出"><a class="header-anchor" href="#org-导出">¶</a>org 导出</h3>
<p>使用 <code>C-c C-e</code> 可以将 org-mode 文档导出为你需要的格式，例如 HTML 或者 PDF 文件。</p>
<h2 id="第六天"><a class="header-anchor" href="#第六天">¶</a>第六天</h2>
<h3 id="org-mode-进阶"><a class="header-anchor" href="#org-mode-进阶">¶</a>org-mode 进阶</h3>
<ol>
<li>
<p>使用 <code>org-capture</code> 命令记笔记。</p>
<p>我们用下面的配置代码来设置一个模板（其中设置了待办事项的优先级还有触发键）：</p>
<div class="hljs code-wrapper"><pre><code> <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">setq</span> org-capture-templates<br>    '((<span class="hljs-string">"t"</span> <span class="hljs-string">"Todo"</span> entry (file+headline <span class="hljs-string">"~/.emacs.d/gtd.org"</span> <span class="hljs-string">"工作安排"</span>)<br>		 <span class="hljs-string">"* TODO [#B] %?\n  %i\n"</span><br>	 :empty-lines <span class="hljs-number">1</span>)))<br></code></pre></div></td></tr></table></figure>
</code></pre>
<p>我们也可以为其绑定一个快捷键：</p>
<div class="hljs code-wrapper"><pre><code> <figure class="highlight lisp"><table><tr><td class="gutter hljs hljs hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lisp">(<span class="hljs-name">global-set-key</span> (<span class="hljs-name">kbd</span> <span class="hljs-string">"C-c r"</span>) 'org-capture)<br></code></pre></div></td></tr></table></figure>
</code></pre>
<p>更多有关 <code>org-capture</code> 的内容可以在<a href="http://orgmode.org/manual/Capture.html" target="_blank" rel="noopener">这里</a>找到。</p>
</li>
</ol>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/Emacs/">Emacs</a>
                    
                      <a class="hover-with-bg" href="/tags/%E7%AC%94%E8%AE%B0/">笔记</a>
                    
                      <a class="hover-with-bg" href="/tags/GNU/">GNU</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" target="_blank" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p>
              
              
                <div class="post-prevnext row">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2020/02/04/%E5%9F%BA%E4%BA%8E-Hexo-Ocean-%E4%B8%BB%E9%A2%98%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">基于 Hexo Ocean 主题博客搭建</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2019/10/05/Elisp-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/">
                        <span class="hidden-mobile">Elisp 学习笔记（一）</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments">
                
                
  <div id="vcomments"></div>
  <script type="text/javascript">
    Fluid.utils.waitElementVisible('vcomments', function() {
      Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js', function () {
        new Valine({
          el: "#vcomments",
          app_id: "TMgxzCpM2zFnsClsMHJY2LLc-gzGzoHsz",
          app_key: "1kPLieLtoBQWf0w6iNxLqkMV",
          placeholder: "说点什么....",
          path: window.location.pathname,
          avatar: "retro",
          meta: ["nick","mail","link"],
          pageSize: "10",
          lang: "zh-CN",
          highlight: true,
          recordIP: true,
          serverURLs: "",
        });
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the
    <a href="https://valine.js.org" target="_blank" rel="nofollow noopener noopener">comments powered by Valine.</a>
  </noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     Powered by <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> &nbsp;and&nbsp; <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- LeanCloud 统计PV -->
        <span id="leancloud-site-pv-container" style="display: none">
            总访问量 
            <span id="leancloud-site-pv"></span>
             次
          </span>
      
      
        <!-- LeanCloud 统计UV -->
        <span id="leancloud-site-uv-container" style="display: none">
            总访客数 
            <span id="leancloud-site-uv"></span>
             人
          </span>
      

    
  </div>


  

  
</footer>

<!-- SCRIPTS -->

  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":200})
    NProgress.start()
    document.addEventListener('DOMContentLoaded', function() {
      window.NProgress && window.NProgress.inc();
    })
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js" ></script>




  <script defer src="/js/leancloud.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      var inputArea = document.querySelector("#local-search-input");
      inputArea.onclick = function () {
        searchFunc(path, 'local-search-input', 'local-search-result');
        this.onclick = null
      }
    })()
  </script>












  
    <!-- Baidu Analytics -->
    <script defer>
      var _hmt = _hmt || [];
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?a9b0666290f750544a1900dff36c0349";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
  

  
    <!-- Google Analytics -->
    <script defer>
      window.ga = window.ga || function () { (ga.q = ga.q || []).push(arguments) };
      ga.l = +new Date;
      ga('create', 'UA-127726236-2', 'auto');
      ga('send', 'pageview');
    </script>
    <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  

  

  





<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>



</body>
</html>
